<div id="edit-church" class="container" v-cloak>

    <div class="display-3"><%= __('Church Edit'); %></div>
    <em class="text-muted">{{igreja.id}}</em>
    <hr>

    <message id="msg" v-on:close="update()" :severity="message.severity" v-bind:summary="message.summary" :details="message.details"></message>
    <cloud-error v-if="cloudError==='badCombo'"><%=__('The main Church (or Mother) cannot be removed')%>.</cloud-error>

    <ajax-form action="saveChurch"
               :syncing.sync="syncing"
               :cloud-error.sync="cloudError"
               :form-data="formData"
               :form-rules="formRules"
               :form-errors.sync="formErrors"
               @submitted="submittedForm()">

        <input type="hidden" name="_csrf" id="_csrf" value="<%= _csrf %>">
        <input type="hidden" name="id" id="id" value="<%= igreja.id %>">

        <label for="shortName"><%= __('Short Name'); %></label>
        <input type="text" class="form-control" id="shortName" name="shortName" v-model="igreja.shortName" required
               minlength="3">

        <label for="fullName"><%= __('Full Name'); %></label>
        <input type="text" class="form-control" id="fullName" name="fullName" v-model="igreja.fullName" required
               minlength="10">

        <label for="email"><%= __('Email'); %></label>
        <input type="email" class="form-control" id="email" name="email" required minlength="5" v-model="igreja.email">

        <label for="address"><%= __('Address'); %></label>
        <input type="text" class="form-control" id="address" name="address" v-model="igreja.address">

        <label for="site"><%= __('Site'); %></label>
        <input type="url" class="form-control" id="site" name="site" v-model="igreja.site">

        <label for="phone"><%= __('Phone'); %></label>
        <input type="tel" class="form-control" id="phone" name="phone" v-model="igreja.phone">

        <div class="row m-1">
            <div class="col">
                <label for="linktree"><%= __('Linktree'); %></label>
                <input type="url" class="form-control" id="linktree" name="linktree" v-model="igreja.linktree">

                <label for="our-community"><%= __('Our Community') %></label>
                <textarea class="form-control" id="our-community" name="ourCommunityText" v-model="igreja.ourCommunityText"
                          rows="2"></textarea>

                <label for="church-mission"><%= __('Church Mission') %></label>
                <textarea class="form-control" id="church-mission" name="churchMissionText" v-model="igreja.churchMissionText"
                          rows="2"></textarea>

                <label for="join-to-group"><%= __('Join to a Group') %></label>
                <textarea class="form-control" id="join-to-group" name="joinToGroupText" v-model="igreja.joinToGroupText"
                          rows="2"></textarea>

                <label for="church-beliefs"><%= __('Church Beliefs') %></label>
                <textarea class="form-control" id="church-beliefs" name="churchBeliefsText" v-model="igreja.churchBeliefsText"
                          rows="2"></textarea>

                <label for="tipo"><%= __('Type'); %></label>
                <input name="tipo" id="tipo" type="text" class="form-control" v-model="igreja.tipo"  disabled="disabled">
            </div>
            <div class="col">
                <label for="groups"><%=__(`Groups`)%></label>
                <ul class="list-group">
                    <li class="list-group-item" v-for="grupo in igreja.classrooms">{{grupo.name}} - {{grupo.local}}</li>
                </ul>
                <label for="sermons"><%=__(`Sermons`)%></label>
                <ul class="list-group">
                    <li class="list-group-item" v-for="sermao in igreja.sermons">{{sermao.titulo}}</li>
                </ul>
                <div class="text-center">
                    <span><%=__(`Manage`)%>:
                        <a href="/sermon/search-sermon"><%=__(`Sermon`) %></a> |
                        <a href="/not-yet"><%=__(`Group`) %></a>
                    </span>
                </div>
                <hr>
                <label for="meetings"><%=__(`Meetings`)%></label>
                <ul class="list-group">
                    <li class="list-group-item" v-for="meet in igreja.churchMeetings">{{meet}}</li>
                </ul>
                <label for="learning"><%=__('Learning')%></label>
                <ul class="list-group">
                    <li class="list-group-item" v-for="learn in igreja.churchLearnings">{{learn}}</li>
                </ul>
                <label for="facilites"><%__(`Facilities`)%></label>
                <ul class="list-group">
                    <li class="list-group-item" v-for="fac in igreja.churchFacilities"></li>
                </ul>
                <div class="text-center">
                    <span><%=__(`Manage`)%>:
                        <a href="/not-yet"><%=__(`Meettings`) %></a> |
                        <a href="/not-yet"><%=__(`Learning`) %></a> |
                        <a href="/not-yet"><%=__(`Facilites`) %></a> |
                    </span>
                </div>
            </div>
        </div>




        <div class="btn-group mt-2">
            <ajax-button type="submit" :syncing="syncing" class="btn btn-primary m-1"><%= __('Save') %></ajax-button>

            <button type="button" class="btn btn-danger m-1" data-bs-toggle="modal"
                    data-bs-target="#exampleModal"><%= __('Delete'); %></button>
            <button class="btn btn-secondary m-1" @click="goToBack()"><%= __('Cancel'); %></button>
        </div>


        <cloud-error v-if="cloudError"></cloud-error>


    </ajax-form>


    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel"><%= __('Remover Igreja') %></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <span class="fw-bolder"><%= __('Tem certeza') %>:</span>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary m-1" data-bs-dismiss="modal" @click="remover()"><%= __('Sim') %></button>
                    <button type="button" class="btn btn-secondary m-1" data-bs-dismiss="modal"><%= __('Nao') %></button>
                </div>
            </div>
        </div>
    </div>

</div>
<%- /* Expose server-rendered data as window.SAILS_LOCALS :: */ exposeLocalsToBrowser(); %>
