<div id="edit-profile" v-cloak>
    <account-notification-banner></account-notification-banner>
    <div class="container pt-5 pb-5">
        <div class="display-3"><%= __('Update personal info') %></div>
        <hr/>
        <ajax-form action="updateProfile" :syncing.sync="syncing" :cloud-error.sync="cloudError" :form-data="formData"
                   :form-rules="formRules" :form-errors.sync="formErrors" @submitted="submittedForm()">
            <div class="row">
                <div class="col-sm-2">
                    <div class="form-group">
                        <label for="profile"><%= __('Profile') %></label>
                        <span class="form-control"> {{me.profile?me.profile:"<%=__('Visitor')%>"}}   </span>
                    </div>
                </div>
                <div class="col-sm-7">
                    <div class="form-group">
                        <label for="full-name"><%= __('Full name') %></label>
                        <input class="form-control" id="full-name" name="full-name" type="text"
                               :class="[formErrors.fullName ? 'is-invalid' : '']" v-model.trim="formData.fullName"
                               placeholder="Sturgis P. Sturgeon" autocomplete="name" focus-first>
                        <div class="invalid-feedback"
                             v-if="formErrors.fullName"><%= __('Please enter your full name') %></div>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label for="email-address"><%= __('Email address') %></label>
                        <input class="form-control" id="email-address" name="email-address" type="email"
                               :class="[formErrors.emailAddress ? 'is-invalid' : '']"
                               v-model.trim="formData.emailAddress" placeholder="sturgeon@example.com"
                               autocomplete="email">
                        <div class="invalid-feedback"
                             v-if="formErrors.emailAddress"><%= __('Please enter a valid email address') %></div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-2">
                    {{' '}}
                </div>
                <div class="col-sm-7">
                    <div class="form-group text-right mt-2">
                        <ajax-button type="submit" :syncing="syncing" class="btn btn-primary"><%= __('Save changes') %></ajax-button>
                        <a class="btn btn-primary" href="/account"><%= __('Cancel') %></a>
                    <cloud-error
                            v-if="cloudError === 'emailAlreadyInUse'"><%= __('There is already an account') %></cloud-error>
                    <cloud-error v-if="cloudError"></cloud-error>
                    </div>
                </div>
                <div class="col-sm-3">
                    {{' '}}
                </div>
            </div>
        </ajax-form>
    </div>
</div>
<%- /* Expose locals as `window.SAILS_LOCALS` :: */ exposeLocalsToBrowser() %>
